{% extends 'base.html' %}

{% block content %}
<h1 class="text-3xl font-bold mb-6 text-center md:text-left">Relatório de Serviços Concluídos</h1>
<div class="bg-white shadow-md rounded-lg p-6 mb-6">
    <form method="get" class="flex flex-col md:flex-row space-y-4 md:space-y-0 md:space-x-4">
        <label class="flex flex-col">
            <span class="text-sm font-medium text-gray-700">Data Inicial:</span>
            <input type="date" name="start_date" value="{{ start_date|date:'Y-m-d' }}" class="mt-1 px-4 py-2 border rounded-lg">
        </label>
        <label class="flex flex-col">
            <span class="text-sm font-medium text-gray-700">Data Final:</span>
            <input type="date" name="end_date" value="{% if end_date %}{{ end_date|date:'Y-m-d' }}{% else %}{% now 'Y-m-d' %}{% endif %}" class="mt-1 px-4 py-2 border rounded-lg">
        </label>
        <button type="submit" class="bg-blue-500 text-white px-6 py-3 rounded-lg shadow hover:bg-blue-600 self-end">Gerar Relatório</button>
    </form>
</div>
<div class="bg-white shadow-md rounded-lg overflow-hidden">
    <table class="min-w-full divide-y divide-gray-200">
        <thead class="bg-gray-50">
            <tr>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Serviço</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Total Concluídos</th>
            </tr>
        </thead>
        <tbody class="bg-white divide-y divide-gray-200">
            {% for item in report_data %}
                <tr>
                    <td class="px-6 py-4 whitespace-nowrap">{{ item.service__name }}</td>
                    <td class="px-6 py-4 whitespace-nowrap">{{ item.total }}</td>
                </tr>
            {% empty %}
                <tr>
                    <td colspan="2" class="px-6 py-4 text-center text-gray-500">Nenhum dado disponível.</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}